FROM python:3.9-slim-bullseye

WORKDIR /app


# Copia todos los archivos de tu proyecto al contenedor
COPY . /app
USER root


RUN pip install --upgrade pip


# Instala Rasa y las dependencias de tus acciones
# ¡Importante! Aquí instalamos el 'requirements.txt'
RUN pip install rasa==3.6.21
RUN pip install -r requirements.txt

# Render pasa el puerto en $PORT
ENV PORT=$PORT

EXPOSE $PORT

# Arrancar el bot
CMD ["python", "run_rasa.py"]